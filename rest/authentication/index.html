<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication - Firmafon API Documentation</title>
    <link href="../../stylesheets/application-69b535c1.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body class="rest rest_authentication rest_authentication_index">
    <div class="contain-to-grid fixed">
      <nav class="top-bar" data-topbar>
        <ul class="title-area">
          <li class="name">
            <h1><a href="/">Firmafon API</a></h1>
          </li>
        </ul>
        <section class="top-bar-section">
          <ul>
            <li class="has-dropdown rest">
              <a href="/rest/">REST</a>
              <ul class="dropdown">
                <li><a href="/rest/authentication/">Authentication</a></li>
                <li><a href="/rest/resources/">Resources</a></li>
              </ul>
            </li>
            <li class="has-dropdown integrations">
              <a href="/integrations/">Integrations</a>
              <ul class="dropdown">
                <li>
                  <a href="integrations/iframe/">Iframe</a>
                </li>
              </ul>
            </li>
            <li class="developer">
              <a href="https://app.firmafon.dk/developers/">Developer Account</a>
            </li>
          </ul>
        </section>
      </nav>
    </div>
    <section id="content" class="container">
      <div class="row">
          <br>
  <div class="medium-4 columns panel">
    <h4>Basics</h4>
    <ul>
      <li><a href="/rest/">Intro</a></li>
      <li><a href="/rest/authentication/">Authentication</a></li>
      <li><a href="/rest/examples/">Examples</a></li>
    </ul>

    <hr>

    <h4>Resources</h4>

    <h5><a href="/rest/resources/#announcements">Announcements</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_announcements">GET /announcements</a></li>
      <li><a href="/rest/resources/#post_announcements_id_mark_as_read/">POST&nbsp;/announcements/:id/mark_as_read</a></li>
    </ul>
    <h5><a href="/rest/resources/#calls">Calls</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_calls">GET /calls</a></li>
      <li><a href="/rest/resources/#get_calls_id">GET /calls/:id</a></li>
    </ul>
    <h5><a href="/rest/resources/#callnodes">CallNodes</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_call_nodes_live">GET /call_nodes/live</a></li>
      <li><a href="/rest/resources/#post_call_nodes_cancel_node_uuid_transfer">POST /call_nodes/:node_uuid/cancel_transfer</a></li>
      <li><a href="/rest/resources/#post_call_nodes_node_uuid_hangup">POST /call_nodes/:node_uuid/hangup</a></li>
      <li><a href="/rest/resources/#post_call_nodes_node_uuid_transfer">POST /call_nodes/:node_uuid/transfer</a></li>
      <li><a href="/rest/resources/#get_call_nodes_id">GET /call_nodels</a></li>
    </ul>
    <h5><a href="/rest/resources/#contacts">Contacts</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_contacts">GET /contacts</a></li>
      <li><a href="/rest/resources/#post_contacts">POST /contacts</a></li>
      <li><a href="/rest/resources/#get_contacts_id">GET /contacts/:id</a></li>
      <li><a href="/rest/resources/#put_contacts_id">PUT /contacts/:id</a></li>
      <li><a href="/rest/resources/#delete_contacts_id">DELETE /contacts/:id</a></li>
    </ul>
    <h5><a href="/rest/resources/#employees">Employees</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_employee">GET /employee</a></li>
      <li><a href="/rest/resources/#get_employees">GET /employees</a></li>
      <li><a href="/rest/resources/#get_employees_id">GET /employees/:id</a></li>
      <li><a href="/rest/resources/#put_employees_id">PUT /employees/:id</a></li>
      <li><a href="/rest/resources/#post_employees_id_message">POST /employees/:id/message</a></li>
    </ul>
    <h5><a href="/rest/resources/#employeegroups">EmployeeGroups</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_employee_groups">GET /employee_groups</a></li>
      <li><a href="/rest/resources/#get_employee_groups_id">GET /employee_groups/:id</a></li>
      <li><a href="/rest/resources/#get_employee_groups_id_employees">GET /employee_groups/:id/employees</a></li>
      <li><a href="/rest/resources/#post_employee_groups_id_join">POST /employee_groups/:id/join</a></li>
      <li><a href="/rest/resources/#post_employee_groups_id_leave">POST /employee_groups/:id/leave</a></li>
      <li><a href="/rest/resources/#post_employee_groups_id_message">POST /employee_groups/:id/message</a></li>
    </ul>
    <h5><a href="/rest/resources/#receptions">Receptions</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_receptions">GET /receptions</a></li>
      <li><a href="/rest/resources/#get_receptions_id">GET /receptions/:id</a></li>
    </ul>
    <h5><a href="/rest/resources/#voicemails">VoiceMails</a></h5>
    <ul>
      <li><a href="/rest/resources/#get_voice_mails">GET /voice_mails</a></li>
      <li><a href="/rest/resources/#get_voice_mails_id">GET /voice_mails/:id</a></li>
      <li><a href="/rest/resources/#put_voice_mails_id">PUT /voice_mails/:id</a></li>
      <li><a href="/rest/resources/#delete_voice_mails_id">DELETE /voice_mails/:id</a></li>
    </ul>

  </ul>
  </div>
  <div class="medium-8 columns">
    <h1>Authentication</h1>
    <p>The Firmafon v2 REST API can only be accessed via <a href="http://oauth.net/2/">OAuth 2.0</a>. This helps us track the usage of your application as well as providing the best possible security and safety to our users&#39; data. OAuth 2.0 is a modern standard used by most providers, large and small.</p>

<h2>Sign up</h2>

<p>To use the Firmafon v2 REST API you need to first <a href="http://app.firmafon.dk/developers/applications/new">register your application</a>. Given that each application is tied to it&rsquo;s own URL you might want to register one for development and one for production.</p>

<h2>Obtaining an Access Token</h2>

<p>Every request to a user&rsquo;s data is authenticated by an access token. To get one the user must accept that they want to use your app. They do this on our domain. Start by redirecting your user to the following address:</p>
<pre class="highlight plaintext">https://app.firmafon.dk/api/v2/authorize
  ?client_id=YOUR_APPLICATIONS_ID
  &amp;response_type=code
  &amp;redirect_uri=YOUR_APPLICATIONS_REDIRECT_URI
</pre>

<p>Users will be prompted to login (if they aren&rsquo;t already) and then asked if they want to grant you access to their account. If they agree, they are taken to your <code>redirect_uri</code> with a request token as a parameter.</p>
<pre class="highlight plaintext">http://example.com/callback?code=REQUEST_TOKEN
</pre>

<p>Your app then makes a POST request like this:</p>
<pre class="highlight plaintext">https://app.firmafon.dk/api/v2/token
  ?client_id=YOUR_APPLICATIONS_ID
  &amp;client_secret=YOUR_APPLICATIONS_SECRET
  &amp;grant_type=authorization_code
  &amp;redirect_uri=YOUR_APPLICATIONS_REDIRECT_URI
  &amp;code=REQUEST_TOKEN
</pre>

<p>The response will be JSON:</p>
<pre class="highlight json"><span class="p">{</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCESS_TOKEN"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></pre>

<p>And there you have it.</p>

<h2>Making requests</h2>

<p>Once all that is done and you&rsquo;ve successfully obtained an access token you need to send it along with every request.</p>

<p>This can be done in several ways:</p>

<p>As a header:</p>
<pre class="highlight shell"><span class="gp">$ </span>curl https://app.firmafon.dk/api/v2/calls -H <span class="s2">"Authorization: Bearer ACCESS_TOKEN"</span>
</pre>

<p>As a parameter:</p>
<pre class="highlight shell"><span class="gp">$ </span>curl https://app.firmafon.dk/api/v2/calls?access_token<span class="o">=</span>ACCESS_TOKEN
</pre>

<h2>Notes on access tokens</h2>

<ul>
<li>Please note that a user may at any time destroy their access tokens. You might want to take this into account when you&rsquo;re building your application.</li>
</ul>

  </div>

        <section id="foot">
          <footer class="medium-12 columns">
            <p>Support: <a href="https://kunderservice.firmafon.dk">Kundeservice</a></p>
          </footer>
        </section>
      </div>
    </section>
    <script src="../../javascripts/application-2a1ea941.js" type="text/javascript"></script>
  </body>
</html>
